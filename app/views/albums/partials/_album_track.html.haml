- download_album ||= nil
- download_album = true if params[:action] == 'show' && current_user.has_role?(:admin)
- edit_album ||= nil
- edit_album = true if !download_album && (params[:action] == "ajax_uploaded_song" || 'edit' || 'create')


%tr{id: "song-#{song.id}"}
  %td.hidden-phone
    = song.track
  %td
    = link_to song.title, song
  %td.hidden-phone
    - song.length ||= 0
    = Time.at(song.length).utc.strftime("%M:%S")
  %td{style: "text-align: center; width: 5%;"}
    = song.downloads
  -if download_album
    %td
      = link_to download_song_path(song, {format: 'mp3'}) do
        %div.btn.btn-info{id: "vertical-toolbar-#{song.id}",style: "padding: 1px 8px 1px 8px;"}
          %i.icon-cloud-download
  -if edit_album
    %td
      %div.btn{id: "vertical-toolbar-#{song.id}",style: "padding: 1px 8px 1px 8px;"}
        %i.icon-cogs
      %div{id: "user-toolbar-#{song.id}", style: "visibility:hidden; color:black; width:0px; height:0px;"}
        = link_to song, class: 'edit-song', style: "text-decoration:none;" do
          %i.icon-eye-open{style: "color:#000;padding:10px;"}
        = link_to edit_song_path(song), class: 'edit-song', style: "text-decoration:none;" do
          %i.icon-pencil{style: "color:#000;padding:10px;"}
        = link_to song, class: 'delete-song', id: "#{song.id}", style: "text-decoration:none;" do
          %i.icon-trash{style: "color:#000;padding:10px;"}

-if edit_album
  :javascript
    $("#vertical-toolbar-#{song.id}").toolbar({
      content: '#user-toolbar-#{song.id}',
      position: 'right',
      hideOnClick: true
    });
    $('.tool-container').hide()